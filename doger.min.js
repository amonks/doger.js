Doger={doger:function(e,t,n){var r=Doger.doge_image();var i=Doger.keywords_to_doge_text(t);var s=Doger.make_doge_image(r,i);s.clone().appendTo(e);var o=$("<div>").append(s.clone()).html();if(n){n.text(o)}return o},keywords_to_doge_text:function(e){var t=["such","much","very","many","so","how"];var n=["wow","amaze","excite"];var r=[];for(var i=0;i<=e.length-1;i++){r.push(Doger.random_from_array(t)+" "+e[i].toLowerCase()+".")}r.push(Doger.random_from_array(n)+".");return r},make_doge_image:function(e,t){var n=$("<div class='doger'><img src='"+e.url+"'class='img-rounded' /></div>");if(t.length<=1){return n}n.find("img").css({position:"absolute",top:"0",left:"0",width:"100%",height:"100%"});n.css({"font-family":"'Comic Sans', 'Comic Sans MS', 'Marker Felt', cursive","font-weight":"bold","font-size":"20px",position:"relative",width:"100%",height:"0","padding-bottom":""+e.height/e.width*100+"%"});for(var r=0;r<=t.length-1;r++){var i=$("<span class='dogetext'>"+t[r]+"</span>");var s=Math.random()*100*.75;var o=r*(100/t.length);var u=Doger.random_color();var a=Doger.random_color();i.css({position:"absolute",top:""+o+"%",left:""+s+"%","text-shadow":"1px 1px"+a,color:u});n.append(i)}return n},doge_image:function(){doge_images=[{url:"http://doge.needsyourhelp.org/images/shiba-inu_01_lg.jpg",width:622,height:352},{url:"http://doge.needsyourhelp.org/images/Shiba-Inu-Main.jpg",width:461,height:400},{url:"http://doge.needsyourhelp.org/images/shiba-inu-puppies-pictures.jpg",width:922,height:922},{url:"http://doge.needsyourhelp.org/images/001.jpg",width:1023,height:1024},{url:"http://doge.needsyourhelp.org/images/Taisen_Shikaki_Inu.jpg",width:800,height:994},{url:"http://doge.needsyourhelp.org/images/shiba_inu.jpg",width:460,height:315},{url:"http://doge.needsyourhelp.org/images/shiba-inu_04_lg.jpg",width:622,height:352}];return Doger.random_from_array(doge_images)},keywords_from_url:function(e){var t="http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20contentanalysis.analyze%20where%20url%3D%22"+escape(e)+"%22&diagnostics=true";var n=$(Doger.httpGet(t));var r=n.find("entity");var i=[];for(var s=0;s<=r.length-1;s++){i.push($(r[s]).find("text").text())}return i},keywords_from_text:function(e){var t="http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20contentanalysis.analyze%20where%20text%3D%22"+encodeURI(e.replace(/[^a-zA-Z ]+/g,""))+"%22&diagnostics=true";var n=$(Doger.httpGet(t));var r=n.find("entity");var i=[];for(var s=r.length-1;s>=0;s--){i.push($(r[s]).find("text").text())}return i},bookmarklet:function(){Doger.loadScript("http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js",function(){var e=Doger.get_selected_text();var t=Doger.keywords_from_text(e);if(t.length>0){var n="http://doge.needsyourhelp.org"+"?"+btoa(t);window.location=n}else{alert("no keywords found")}})},get_selected_text:function(){var e="";if(window.getSelection){e=window.getSelection().toString()}else if(document.selection&&document.selection.type!="Control"){e=document.selection.createRange().text}return e},get_query_string:function(){if(window.location.href.indexOf("?")==-1){return null}else{var e=window.location.href.slice(window.location.href.indexOf("?")+1);return atob(e)}},check_for_url:function(e){var t=new RegExp("^(https?:\\/\\/)","i");if(!t.test(e)){return false}else{return true}},httpGet:function(e){if(Doger.check_for_url(e)==false){return null}var t=null;t=new XMLHttpRequest;t.open("GET",e,false);t.send(null);return t.responseText},random_from_array:function(e){return e[Math.floor(Math.random()*e.length)]},random_color:function(){return"#"+Math.floor(Math.random()*16777215).toString(16)},loadScript:function(e,t){var n=document.getElementsByTagName("head")[0];var r=document.createElement("script");r.src=e;var i=false;r.onload=r.onreadystatechange=function(){if(!i&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){i=true;t();r.onload=r.onreadystatechange=null;n.removeChild(r)}};n.appendChild(r)}}